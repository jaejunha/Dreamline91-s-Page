<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
<link rel="stylesheet" type="text/css" href="{% static 'css/home/intro.css' %}?ver=0.8"/>
<script>
	var static_star = "{% static 'personal/model/star.json' %}";
	var static_bird = "{% static 'personal/model/bird.json' %}";
	var static_text = "{% static 'personal/model/text.json' %}";
	var static_intro0 = "{{intro.0}}";
	var static_intro1 = "{{intro.1}}";
	var static_intro2 = "{{intro.2}}";
	var static_intro3 = "{{intro.3}}";
</script>
<script type="text/javascript" src="{% static 'js/home/intro.js' %}?ver=0.8"></script>
</head>
<body>	
	<p id="first"></p>
	<div id="detail">
	<p id="second"></p>
	<p id="third"><br>
	</p>
	<p id="fourth"></p>
	</div>
	<div id="div_threejs"></div>
	<script>
		if(home == 1)
			setTimeout(function() { loadThree(); }, 1000);
		else{
			index_star = ANI_STAR_ACTION1;
			index_bird = ANI_BIRD_ACTION1;
			index_text = ANI_WAIT;
			loadThree();
		}
		function loadThree(){
			bool_animate = true;
			time_start = new Date().getTime();

			clock = new THREE.Clock();
			scene = new THREE.Scene();

			renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
			renderer.setPixelRatio(window.devicePixelRatio);
			var int_width = $(window).width()-200;
			var int_height = $(window).height()-120;
			$('#div_threejs').css('height',int_height);
			renderer.setSize(int_width, int_height);

			$('#div_threejs').append(renderer.domElement);
			$('#div_threejs').css('overflow','hidden');

			camera = new THREE.OrthographicCamera( -int_width / 50, int_width / 50, int_height / 50, -int_height / 50, - 1000, 1000);
			camera.position.set(0, 5, 100);

			orbit = new THREE.OrbitControls(camera, renderer.domElement);
			orbit.minZoom = 0.5;
			orbit.maxZoom = 1.5;

			var ambient = new THREE.AmbientLight(0xffffff, 1);
	  		scene.add(ambient);

			var spot = new THREE.SpotLight(0xFFFFFF);
			spot.position.set(-45,90,30);  
			scene.add(spot); 

			particles = new THREE.Geometry;
			for (var i = 0, particle, x, y, z, nx = int_width / 24 , mx = nx * 2, ny = int_height / 36, my = ny * 2, nz = int_width / 36, mz = 2 * nz ; i < int_particleCount; i++) {
				x = Math.random() * mx - nx;
				y = Math.random()* my - ny;
				z = Math.random()* mz - nz;
				particle = new THREE.Vector3(x, y, z);
				particle.velocity = {};
				particle.velocity.y = - 0.7 * Math.random() - 0.1;
				particles.vertices.push(particle);
			}
			material_particle = new THREE.PointsMaterial({
				size: 4,
				map: THREE.ImageUtils.loadTexture("{% static 'img/snow.png' %}"),
				blending: THREE.AdditiveBlending,
				depthTest: false,
				transparent: true
			});
			scene.add(new THREE.Points(particles, material_particle));

			loadStar();			
		}
	</script>
</body>
</html>
